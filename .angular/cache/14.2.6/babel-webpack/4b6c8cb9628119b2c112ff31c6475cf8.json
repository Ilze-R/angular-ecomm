{"ast":null,"code":"/*!\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport { __awaiter, __decorate, __param, __metadata } from 'tslib';\nimport { InjectionToken, Component, Inject, Optional, Injector, Injectable, Input, Directive, TemplateRef, ViewContainerRef, VERSION, NgModule } from '@angular/core';\nimport { Router, NavigationStart } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { OktaAuth, AuthSdkError, toRelativeUrl } from '@okta/okta-auth-js';\nimport { filter, mergeMap } from 'rxjs/operators';\nimport { BehaviorSubject } from 'rxjs';\nimport { compare } from 'compare-versions';\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@okta/okta-auth-js';\nimport * as ɵngcc2 from '@angular/common';\nimport * as ɵngcc3 from '@angular/router';\nconst OKTA_CONFIG = new InjectionToken('okta.config.angular');\nconst OKTA_AUTH = new InjectionToken('okta.auth');\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nlet OktaCallbackComponent = class OktaCallbackComponent {\n  constructor(config, oktaAuth, injector) {\n    this.config = config;\n    this.oktaAuth = oktaAuth;\n    this.injector = injector;\n  }\n\n  ngOnInit() {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        // Parse code or tokens from the URL, store tokens in the TokenManager, and redirect back to the originalUri\n        yield this.oktaAuth.handleLoginRedirect();\n      } catch (e) {\n        // Callback from social IDP. Show custom login page to continue.\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore Supports auth-js v5 & v6\n        const isInteractionRequiredError = this.oktaAuth.isInteractionRequiredError || this.oktaAuth.idx.isInteractionRequiredError;\n\n        if (isInteractionRequiredError(e) && this.injector) {\n          const {\n            onAuthResume,\n            onAuthRequired\n          } = this.config;\n          const callbackFn = onAuthResume || onAuthRequired;\n\n          if (callbackFn) {\n            callbackFn(this.oktaAuth, this.injector);\n            return;\n          }\n        }\n\n        this.error = e.toString();\n      }\n    });\n  }\n\n};\n\nOktaCallbackComponent.ɵfac = function OktaCallbackComponent_Factory(t) {\n  return new (t || OktaCallbackComponent)(ɵngcc0.ɵɵdirectiveInject(OKTA_CONFIG), ɵngcc0.ɵɵdirectiveInject(OKTA_AUTH), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Injector, 8));\n};\n\nOktaCallbackComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: OktaCallbackComponent,\n  selectors: [[\"ng-component\"]],\n  decls: 2,\n  vars: 1,\n  template: function OktaCallbackComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementStart(0, \"div\");\n      ɵngcc0.ɵɵtext(1);\n      ɵngcc0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵtextInterpolate(ctx.error);\n    }\n  },\n  encapsulation: 2\n});\nOktaCallbackComponent = __decorate([__param(0, Inject(OKTA_CONFIG)), __param(1, Inject(OKTA_AUTH)), __param(2, Optional()), __metadata(\"design:paramtypes\", [Object, OktaAuth, Injector])], OktaCallbackComponent);\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nlet OktaAuthGuard = class OktaAuthGuard {\n  constructor(config, oktaAuth, injector) {\n    this.config = config;\n    this.oktaAuth = oktaAuth;\n    this.injector = injector;\n\n    this.updateAuthStateListener = authState => {\n      if (!authState.isAuthenticated) {\n        this.handleLogin(this.state.url);\n      }\n    };\n\n    this.onAuthRequired = this.config.onAuthRequired; // Unsubscribe updateAuthStateListener when route change\n\n    const router = injector.get(Router);\n    router.events.pipe(filter(e => e instanceof NavigationStart && this.state && this.state.url !== e.url)).subscribe(() => {\n      this.oktaAuth.authStateManager.unsubscribe(this.updateAuthStateListener);\n    });\n  }\n\n  canLoad(route, segments) {\n    return __awaiter(this, void 0, void 0, function* () {\n      this.onAuthRequired = route.data && route.data.onAuthRequired || this.onAuthRequired;\n      const isAuthenticated = yield this.oktaAuth.isAuthenticated();\n\n      if (isAuthenticated) {\n        return true;\n      }\n\n      const originalUri = segments[0].path;\n      yield this.handleLogin(originalUri);\n      return false;\n    });\n  }\n  /**\n   * Gateway for protected route. Returns true if there is a valid accessToken,\n   * otherwise it will cache the route and start the login flow.\n   * @param route\n   * @param state\n   */\n\n\n  canActivate(route, state) {\n    return __awaiter(this, void 0, void 0, function* () {\n      // Track states for current route\n      this.state = state;\n      this.onAuthRequired = route.data && route.data.onAuthRequired || this.onAuthRequired; // Protect the route after accessing\n\n      this.oktaAuth.authStateManager.subscribe(this.updateAuthStateListener);\n      const isAuthenticated = yield this.oktaAuth.isAuthenticated();\n\n      if (isAuthenticated) {\n        return true;\n      }\n\n      yield this.handleLogin(state.url);\n      return false;\n    });\n  }\n\n  canActivateChild(route, state) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return this.canActivate(route, state);\n    });\n  }\n\n  handleLogin(originalUri) {\n    return __awaiter(this, void 0, void 0, function* () {\n      // Store the current path\n      this.oktaAuth.setOriginalUri(originalUri);\n\n      if (this.onAuthRequired) {\n        this.onAuthRequired(this.oktaAuth, this.injector);\n      } else {\n        this.oktaAuth.signInWithRedirect();\n      }\n    });\n  }\n\n};\n\nOktaAuthGuard.ɵfac = function OktaAuthGuard_Factory(t) {\n  return new (t || OktaAuthGuard)(ɵngcc0.ɵɵinject(OKTA_CONFIG), ɵngcc0.ɵɵinject(OKTA_AUTH), ɵngcc0.ɵɵinject(ɵngcc0.Injector));\n};\n\nOktaAuthGuard.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n  token: OktaAuthGuard,\n  factory: function (t) {\n    return OktaAuthGuard.ɵfac(t);\n  }\n});\nOktaAuthGuard = __decorate([__param(0, Inject(OKTA_CONFIG)), __param(1, Inject(OKTA_AUTH)), __metadata(\"design:paramtypes\", [Object, OktaAuth, Injector])], OktaAuthGuard);\nconst defaultAuthState = {\n  isAuthenticated: false\n};\nlet OktaAuthStateService = class OktaAuthStateService {\n  constructor(oktaAuth) {\n    this.oktaAuth = oktaAuth;\n    this._authState = new BehaviorSubject(defaultAuthState); // only expose readonly property\n\n    this.authState$ = this._authState.asObservable();\n    this.updateAuthState = this.updateAuthState.bind(this); // set initial authState\n\n    const initialAuthState = this.oktaAuth.authStateManager.getAuthState() || defaultAuthState;\n\n    this._authState.next(initialAuthState); // subscribe to future changes\n\n\n    this.oktaAuth.authStateManager.subscribe(this.updateAuthState);\n  }\n\n  ngOnDestroy() {\n    this.oktaAuth.authStateManager.unsubscribe(this.updateAuthState);\n  } // Observes as true when any group input can match groups from user claims \n\n\n  hasAnyGroups(groups) {\n    return this.authState$.pipe(mergeMap(({\n      isAuthenticated,\n      idToken\n    }) => __awaiter(this, void 0, void 0, function* () {\n      // return false when not authenticated or openid is not in scopes\n      if (!isAuthenticated || !idToken) {\n        return false;\n      } // transform inputs to consistent object format\n\n\n      if (typeof groups === 'string') {\n        groups = {\n          groups: [groups]\n        };\n      }\n\n      if (Array.isArray(groups)) {\n        groups = {\n          groups\n        };\n      }\n\n      const key = Object.keys(groups)[0];\n      const value = groups[key]; // groups or custom claims is available in idToken\n\n      if (idToken.claims[key]) {\n        return value.some(authority => idToken.claims[key].includes(authority));\n      } // try /userinfo endpoint when thin idToken (no groups claim) is returned\n      // https://developer.okta.com/docs/concepts/api-access-management/#tokens-and-scopes\n\n\n      const userInfo = yield this.oktaAuth.getUser();\n\n      if (!userInfo[key]) {\n        return false;\n      }\n\n      return value.some(authority => userInfo[key].includes(authority));\n    })));\n  }\n\n  updateAuthState(authState) {\n    this._authState.next(authState);\n  }\n\n};\n\nOktaAuthStateService.ɵfac = function OktaAuthStateService_Factory(t) {\n  return new (t || OktaAuthStateService)(ɵngcc0.ɵɵinject(OKTA_AUTH));\n};\n\nOktaAuthStateService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n  token: OktaAuthStateService,\n  factory: function (t) {\n    return OktaAuthStateService.ɵfac(t);\n  }\n});\nOktaAuthStateService = __decorate([__param(0, Inject(OKTA_AUTH)), __metadata(\"design:paramtypes\", [OktaAuth])], OktaAuthStateService);\nlet OktaHasAnyGroupDirective = class OktaHasAnyGroupDirective {\n  constructor( // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  templateRef, viewContainer, authStateService) {\n    this.templateRef = templateRef;\n    this.viewContainer = viewContainer;\n    this.authStateService = authStateService;\n  }\n\n  set oktaHasAnyGroup(groups) {\n    this.authStateService.hasAnyGroups(groups).subscribe(isAuthorized => {\n      // don't update UI if no state change\n      if (isAuthorized === this.previousIsAuthorized) {\n        return;\n      }\n\n      this.previousIsAuthorized = isAuthorized;\n      this.viewContainer.clear();\n\n      if (isAuthorized) {\n        this.viewContainer.createEmbeddedView(this.templateRef);\n      }\n    });\n  }\n\n};\n\nOktaHasAnyGroupDirective.ɵfac = function OktaHasAnyGroupDirective_Factory(t) {\n  return new (t || OktaHasAnyGroupDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef), ɵngcc0.ɵɵdirectiveInject(OktaAuthStateService));\n};\n\nOktaHasAnyGroupDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: OktaHasAnyGroupDirective,\n  selectors: [[\"\", \"oktaHasAnyGroup\", \"\"]],\n  inputs: {\n    oktaHasAnyGroup: \"oktaHasAnyGroup\"\n  }\n});\n\n__decorate([Input(), __metadata(\"design:type\", Object), __metadata(\"design:paramtypes\", [Object])], OktaHasAnyGroupDirective.prototype, \"oktaHasAnyGroup\", null);\n\nOktaHasAnyGroupDirective = __decorate([__metadata(\"design:paramtypes\", [TemplateRef, ViewContainerRef, OktaAuthStateService])], OktaHasAnyGroupDirective);\nvar packageInfo = {\n  'name': '@okta/okta-angular',\n  'version': '5.2.0',\n  'authJSMinSupportedVersion': '5.3.1'\n};\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nfunction oktaAuthFactory(config) {\n  return config.oktaAuth;\n}\n\nlet OktaAuthModule = class OktaAuthModule {\n  constructor(config, location, router) {\n    const {\n      oktaAuth\n    } = config;\n    const isAuthJsSupported = oktaAuth._oktaUserAgent && compare(oktaAuth._oktaUserAgent.getVersion(), packageInfo.authJSMinSupportedVersion, '>=');\n\n    if (!isAuthJsSupported) {\n      throw new AuthSdkError(`Passed in oktaAuth is not compatible with the SDK, minimum supported okta-auth-js version is ${packageInfo.authJSMinSupportedVersion}.`);\n    } // Add Okta UA\n\n\n    oktaAuth._oktaUserAgent.addEnvironment(`${packageInfo.name}/${packageInfo.version}`);\n\n    oktaAuth._oktaUserAgent.addEnvironment(`Angular/${VERSION.full}`); // Provide a default implementation of `restoreOriginalUri`\n\n\n    if (!oktaAuth.options.restoreOriginalUri && router && location) {\n      oktaAuth.options.restoreOriginalUri = (_, originalUri) => __awaiter(this, void 0, void 0, function* () {\n        const baseUrl = window.location.origin + location.prepareExternalUrl('');\n        const routePath = toRelativeUrl(originalUri || '/', baseUrl);\n        router.navigateByUrl(routePath);\n      });\n    } // Start services\n\n\n    oktaAuth.start();\n  }\n\n};\n\nOktaAuthModule.ɵfac = function OktaAuthModule_Factory(t) {\n  return new (t || OktaAuthModule)(ɵngcc0.ɵɵinject(OKTA_CONFIG), ɵngcc0.ɵɵinject(ɵngcc2.Location, 8), ɵngcc0.ɵɵinject(ɵngcc3.Router, 8));\n};\n\nOktaAuthModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n  type: OktaAuthModule\n});\nOktaAuthModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n  providers: [OktaAuthGuard, OktaAuthStateService, {\n    provide: OKTA_AUTH,\n    useFactory: oktaAuthFactory,\n    deps: [OKTA_CONFIG]\n  }]\n});\nOktaAuthModule = __decorate([__param(0, Inject(OKTA_CONFIG)), __param(1, Optional()), __param(2, Optional()), __metadata(\"design:paramtypes\", [Object, Location, Router])], OktaAuthModule);\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaCallbackComponent, [{\n    type: Component,\n    args: [{\n      template: `<div>{{error}}</div>`\n    }]\n  }], function () {\n    return [{\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [OKTA_CONFIG]\n      }]\n    }, {\n      type: ɵngcc1.OktaAuth,\n      decorators: [{\n        type: Inject,\n        args: [OKTA_AUTH]\n      }]\n    }, {\n      type: ɵngcc0.Injector,\n      decorators: [{\n        type: Optional\n      }]\n    }];\n  }, null);\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaAuthGuard, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [OKTA_CONFIG]\n      }]\n    }, {\n      type: ɵngcc1.OktaAuth,\n      decorators: [{\n        type: Inject,\n        args: [OKTA_AUTH]\n      }]\n    }, {\n      type: ɵngcc0.Injector\n    }];\n  }, null);\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaAuthStateService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: ɵngcc1.OktaAuth,\n      decorators: [{\n        type: Inject,\n        args: [OKTA_AUTH]\n      }]\n    }];\n  }, null);\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaHasAnyGroupDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[oktaHasAnyGroup]'\n    }]\n  }], function () {\n    return [{\n      type: ɵngcc0.TemplateRef\n    }, {\n      type: ɵngcc0.ViewContainerRef\n    }, {\n      type: OktaAuthStateService\n    }];\n  }, {\n    oktaHasAnyGroup: [{\n      type: Input\n    }]\n  });\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaAuthModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [OktaCallbackComponent, OktaHasAnyGroupDirective],\n      exports: [OktaCallbackComponent, OktaHasAnyGroupDirective],\n      providers: [OktaAuthGuard, OktaAuthStateService, {\n        provide: OKTA_AUTH,\n        useFactory: oktaAuthFactory,\n        deps: [OKTA_CONFIG]\n      }]\n    }]\n  }], function () {\n    return [{\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [OKTA_CONFIG]\n      }]\n    }, {\n      type: ɵngcc2.Location,\n      decorators: [{\n        type: Optional\n      }]\n    }, {\n      type: ɵngcc3.Router,\n      decorators: [{\n        type: Optional\n      }]\n    }];\n  }, null);\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(OktaAuthModule, {\n    declarations: [OktaCallbackComponent, OktaHasAnyGroupDirective],\n    exports: [OktaCallbackComponent, OktaHasAnyGroupDirective]\n  });\n})();\n\nexport { OKTA_AUTH, OKTA_CONFIG, OktaAuthGuard, OktaAuthModule, OktaAuthStateService, OktaCallbackComponent, oktaAuthFactory as ɵa, OktaHasAnyGroupDirective as ɵb };","map":{"version":3,"sources":["/Users/i/Desktop/angular/ang-full-ecom/03-frontend/angular-ecommerce/node_modules/@okta/okta-angular/__ivy_ngcc__/fesm2015/okta-angular.js"],"names":["__awaiter","__decorate","__param","__metadata","InjectionToken","Component","Inject","Optional","Injector","Injectable","Input","Directive","TemplateRef","ViewContainerRef","VERSION","NgModule","Router","NavigationStart","Location","OktaAuth","AuthSdkError","toRelativeUrl","filter","mergeMap","BehaviorSubject","compare","ɵngcc0","ɵngcc1","ɵngcc2","ɵngcc3","OKTA_CONFIG","OKTA_AUTH","OktaCallbackComponent","constructor","config","oktaAuth","injector","ngOnInit","handleLoginRedirect","e","isInteractionRequiredError","idx","onAuthResume","onAuthRequired","callbackFn","error","toString","ɵfac","OktaCallbackComponent_Factory","t","ɵɵdirectiveInject","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","template","OktaCallbackComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","encapsulation","Object","OktaAuthGuard","updateAuthStateListener","authState","isAuthenticated","handleLogin","state","url","router","get","events","pipe","subscribe","authStateManager","unsubscribe","canLoad","route","segments","data","originalUri","path","canActivate","canActivateChild","setOriginalUri","signInWithRedirect","OktaAuthGuard_Factory","ɵɵinject","ɵprov","ɵɵdefineInjectable","token","factory","defaultAuthState","OktaAuthStateService","_authState","authState$","asObservable","updateAuthState","bind","initialAuthState","getAuthState","next","ngOnDestroy","hasAnyGroups","groups","idToken","Array","isArray","key","keys","value","claims","some","authority","includes","userInfo","getUser","OktaAuthStateService_Factory","OktaHasAnyGroupDirective","templateRef","viewContainer","authStateService","oktaHasAnyGroup","isAuthorized","previousIsAuthorized","clear","createEmbeddedView","OktaHasAnyGroupDirective_Factory","ɵdir","ɵɵdefineDirective","inputs","prototype","packageInfo","oktaAuthFactory","OktaAuthModule","location","isAuthJsSupported","_oktaUserAgent","getVersion","authJSMinSupportedVersion","addEnvironment","name","version","full","options","restoreOriginalUri","_","baseUrl","window","origin","prepareExternalUrl","routePath","navigateByUrl","start","OktaAuthModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","providers","provide","useFactory","deps","ngDevMode","ɵsetClassMetadata","args","decorators","selector","declarations","exports","ngJitMode","ɵɵsetNgModuleScope","ɵa","ɵb"],"mappings":"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","sourcesContent":["/*!\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport { __awaiter, __decorate, __param, __metadata } from 'tslib';\nimport { InjectionToken, Component, Inject, Optional, Injector, Injectable, Input, Directive, TemplateRef, ViewContainerRef, VERSION, NgModule } from '@angular/core';\nimport { Router, NavigationStart } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { OktaAuth, AuthSdkError, toRelativeUrl } from '@okta/okta-auth-js';\nimport { filter, mergeMap } from 'rxjs/operators';\nimport { BehaviorSubject } from 'rxjs';\nimport { compare } from 'compare-versions';\n\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@okta/okta-auth-js';\nimport * as ɵngcc2 from '@angular/common';\nimport * as ɵngcc3 from '@angular/router';\nconst OKTA_CONFIG = new InjectionToken('okta.config.angular');\nconst OKTA_AUTH = new InjectionToken('okta.auth');\n\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nlet OktaCallbackComponent = class OktaCallbackComponent {\n    constructor(config, oktaAuth, injector) {\n        this.config = config;\n        this.oktaAuth = oktaAuth;\n        this.injector = injector;\n    }\n    ngOnInit() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                // Parse code or tokens from the URL, store tokens in the TokenManager, and redirect back to the originalUri\n                yield this.oktaAuth.handleLoginRedirect();\n            }\n            catch (e) {\n                // Callback from social IDP. Show custom login page to continue.\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore Supports auth-js v5 & v6\n                const isInteractionRequiredError = this.oktaAuth.isInteractionRequiredError || this.oktaAuth.idx.isInteractionRequiredError;\n                if (isInteractionRequiredError(e) && this.injector) {\n                    const { onAuthResume, onAuthRequired } = this.config;\n                    const callbackFn = onAuthResume || onAuthRequired;\n                    if (callbackFn) {\n                        callbackFn(this.oktaAuth, this.injector);\n                        return;\n                    }\n                }\n                this.error = e.toString();\n            }\n        });\n    }\n};\nOktaCallbackComponent.ɵfac = function OktaCallbackComponent_Factory(t) { return new (t || OktaCallbackComponent)(ɵngcc0.ɵɵdirectiveInject(OKTA_CONFIG), ɵngcc0.ɵɵdirectiveInject(OKTA_AUTH), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Injector, 8)); };\nOktaCallbackComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: OktaCallbackComponent, selectors: [[\"ng-component\"]], decls: 2, vars: 1, template: function OktaCallbackComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\");\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ctx.error);\n    } }, encapsulation: 2 });\nOktaCallbackComponent = __decorate([ __param(0, Inject(OKTA_CONFIG)),\n    __param(1, Inject(OKTA_AUTH)),\n    __param(2, Optional()),\n    __metadata(\"design:paramtypes\", [Object, OktaAuth,\n        Injector])\n], OktaCallbackComponent);\n\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nlet OktaAuthGuard = class OktaAuthGuard {\n    constructor(config, oktaAuth, injector) {\n        this.config = config;\n        this.oktaAuth = oktaAuth;\n        this.injector = injector;\n        this.updateAuthStateListener = (authState) => {\n            if (!authState.isAuthenticated) {\n                this.handleLogin(this.state.url);\n            }\n        };\n        this.onAuthRequired = this.config.onAuthRequired;\n        // Unsubscribe updateAuthStateListener when route change\n        const router = injector.get(Router);\n        router.events.pipe(filter((e) => e instanceof NavigationStart && this.state && this.state.url !== e.url)).subscribe(() => {\n            this.oktaAuth.authStateManager.unsubscribe(this.updateAuthStateListener);\n        });\n    }\n    canLoad(route, segments) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.onAuthRequired = route.data && route.data.onAuthRequired || this.onAuthRequired;\n            const isAuthenticated = yield this.oktaAuth.isAuthenticated();\n            if (isAuthenticated) {\n                return true;\n            }\n            const originalUri = segments[0].path;\n            yield this.handleLogin(originalUri);\n            return false;\n        });\n    }\n    /**\n     * Gateway for protected route. Returns true if there is a valid accessToken,\n     * otherwise it will cache the route and start the login flow.\n     * @param route\n     * @param state\n     */\n    canActivate(route, state) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Track states for current route\n            this.state = state;\n            this.onAuthRequired = route.data && route.data.onAuthRequired || this.onAuthRequired;\n            // Protect the route after accessing\n            this.oktaAuth.authStateManager.subscribe(this.updateAuthStateListener);\n            const isAuthenticated = yield this.oktaAuth.isAuthenticated();\n            if (isAuthenticated) {\n                return true;\n            }\n            yield this.handleLogin(state.url);\n            return false;\n        });\n    }\n    canActivateChild(route, state) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.canActivate(route, state);\n        });\n    }\n    handleLogin(originalUri) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Store the current path\n            this.oktaAuth.setOriginalUri(originalUri);\n            if (this.onAuthRequired) {\n                this.onAuthRequired(this.oktaAuth, this.injector);\n            }\n            else {\n                this.oktaAuth.signInWithRedirect();\n            }\n        });\n    }\n};\nOktaAuthGuard.ɵfac = function OktaAuthGuard_Factory(t) { return new (t || OktaAuthGuard)(ɵngcc0.ɵɵinject(OKTA_CONFIG), ɵngcc0.ɵɵinject(OKTA_AUTH), ɵngcc0.ɵɵinject(ɵngcc0.Injector)); };\nOktaAuthGuard.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: OktaAuthGuard, factory: function (t) { return OktaAuthGuard.ɵfac(t); } });\nOktaAuthGuard = __decorate([ __param(0, Inject(OKTA_CONFIG)),\n    __param(1, Inject(OKTA_AUTH)),\n    __metadata(\"design:paramtypes\", [Object, OktaAuth,\n        Injector])\n], OktaAuthGuard);\n\nconst defaultAuthState = {\n    isAuthenticated: false\n};\nlet OktaAuthStateService = class OktaAuthStateService {\n    constructor(oktaAuth) {\n        this.oktaAuth = oktaAuth;\n        this._authState = new BehaviorSubject(defaultAuthState);\n        // only expose readonly property\n        this.authState$ = this._authState.asObservable();\n        this.updateAuthState = this.updateAuthState.bind(this);\n        // set initial authState\n        const initialAuthState = this.oktaAuth.authStateManager.getAuthState() || defaultAuthState;\n        this._authState.next(initialAuthState);\n        // subscribe to future changes\n        this.oktaAuth.authStateManager.subscribe(this.updateAuthState);\n    }\n    ngOnDestroy() {\n        this.oktaAuth.authStateManager.unsubscribe(this.updateAuthState);\n    }\n    // Observes as true when any group input can match groups from user claims \n    hasAnyGroups(groups) {\n        return this.authState$.pipe(mergeMap(({ isAuthenticated, idToken }) => __awaiter(this, void 0, void 0, function* () {\n            // return false when not authenticated or openid is not in scopes\n            if (!isAuthenticated || !idToken) {\n                return false;\n            }\n            // transform inputs to consistent object format\n            if (typeof groups === 'string') {\n                groups = { groups: [groups] };\n            }\n            if (Array.isArray(groups)) {\n                groups = { groups };\n            }\n            const key = Object.keys(groups)[0];\n            const value = groups[key];\n            // groups or custom claims is available in idToken\n            if (idToken.claims[key]) {\n                return value.some((authority) => idToken.claims[key].includes(authority));\n            }\n            // try /userinfo endpoint when thin idToken (no groups claim) is returned\n            // https://developer.okta.com/docs/concepts/api-access-management/#tokens-and-scopes\n            const userInfo = yield this.oktaAuth.getUser();\n            if (!userInfo[key]) {\n                return false;\n            }\n            return value.some((authority) => userInfo[key].includes(authority));\n        })));\n    }\n    updateAuthState(authState) {\n        this._authState.next(authState);\n    }\n};\nOktaAuthStateService.ɵfac = function OktaAuthStateService_Factory(t) { return new (t || OktaAuthStateService)(ɵngcc0.ɵɵinject(OKTA_AUTH)); };\nOktaAuthStateService.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: OktaAuthStateService, factory: function (t) { return OktaAuthStateService.ɵfac(t); } });\nOktaAuthStateService = __decorate([ __param(0, Inject(OKTA_AUTH)),\n    __metadata(\"design:paramtypes\", [OktaAuth])\n], OktaAuthStateService);\n\nlet OktaHasAnyGroupDirective = class OktaHasAnyGroupDirective {\n    constructor(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    templateRef, viewContainer, authStateService) {\n        this.templateRef = templateRef;\n        this.viewContainer = viewContainer;\n        this.authStateService = authStateService;\n    }\n    set oktaHasAnyGroup(groups) {\n        this.authStateService.hasAnyGroups(groups)\n            .subscribe(isAuthorized => {\n            // don't update UI if no state change\n            if (isAuthorized === this.previousIsAuthorized) {\n                return;\n            }\n            this.previousIsAuthorized = isAuthorized;\n            this.viewContainer.clear();\n            if (isAuthorized) {\n                this.viewContainer.createEmbeddedView(this.templateRef);\n            }\n        });\n    }\n};\nOktaHasAnyGroupDirective.ɵfac = function OktaHasAnyGroupDirective_Factory(t) { return new (t || OktaHasAnyGroupDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef), ɵngcc0.ɵɵdirectiveInject(OktaAuthStateService)); };\nOktaHasAnyGroupDirective.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: OktaHasAnyGroupDirective, selectors: [[\"\", \"oktaHasAnyGroup\", \"\"]], inputs: { oktaHasAnyGroup: \"oktaHasAnyGroup\" } });\n__decorate([\n    Input(),\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [Object])\n], OktaHasAnyGroupDirective.prototype, \"oktaHasAnyGroup\", null);\nOktaHasAnyGroupDirective = __decorate([ __metadata(\"design:paramtypes\", [TemplateRef,\n        ViewContainerRef,\n        OktaAuthStateService])\n], OktaHasAnyGroupDirective);\n\nvar packageInfo = {\n    'name': '@okta/okta-angular',\n    'version': '5.2.0',\n    'authJSMinSupportedVersion': '5.3.1'\n};\n\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nfunction oktaAuthFactory(config) {\n    return config.oktaAuth;\n}\nlet OktaAuthModule = class OktaAuthModule {\n    constructor(config, location, router) {\n        const { oktaAuth } = config;\n        const isAuthJsSupported = oktaAuth._oktaUserAgent && compare(oktaAuth._oktaUserAgent.getVersion(), packageInfo.authJSMinSupportedVersion, '>=');\n        if (!isAuthJsSupported) {\n            throw new AuthSdkError(`Passed in oktaAuth is not compatible with the SDK, minimum supported okta-auth-js version is ${packageInfo.authJSMinSupportedVersion}.`);\n        }\n        // Add Okta UA\n        oktaAuth._oktaUserAgent.addEnvironment(`${packageInfo.name}/${packageInfo.version}`);\n        oktaAuth._oktaUserAgent.addEnvironment(`Angular/${VERSION.full}`);\n        // Provide a default implementation of `restoreOriginalUri`\n        if (!oktaAuth.options.restoreOriginalUri && router && location) {\n            oktaAuth.options.restoreOriginalUri = (_, originalUri) => __awaiter(this, void 0, void 0, function* () {\n                const baseUrl = window.location.origin + location.prepareExternalUrl('');\n                const routePath = toRelativeUrl(originalUri || '/', baseUrl);\n                router.navigateByUrl(routePath);\n            });\n        }\n        // Start services\n        oktaAuth.start();\n    }\n};\nOktaAuthModule.ɵfac = function OktaAuthModule_Factory(t) { return new (t || OktaAuthModule)(ɵngcc0.ɵɵinject(OKTA_CONFIG), ɵngcc0.ɵɵinject(ɵngcc2.Location, 8), ɵngcc0.ɵɵinject(ɵngcc3.Router, 8)); };\nOktaAuthModule.ɵmod = /*@__PURE__*/ ɵngcc0.ɵɵdefineNgModule({ type: OktaAuthModule });\nOktaAuthModule.ɵinj = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjector({ providers: [\n        OktaAuthGuard,\n        OktaAuthStateService,\n        {\n            provide: OKTA_AUTH,\n            useFactory: oktaAuthFactory,\n            deps: [OKTA_CONFIG]\n        },\n    ] });\nOktaAuthModule = __decorate([ __param(0, Inject(OKTA_CONFIG)),\n    __param(1, Optional()),\n    __param(2, Optional()),\n    __metadata(\"design:paramtypes\", [Object, Location,\n        Router])\n], OktaAuthModule);\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaCallbackComponent, [{\n        type: Component,\n        args: [{\n                template: `<div>{{error}}</div>`\n            }]\n    }], function () { return [{ type: Object, decorators: [{\n                type: Inject,\n                args: [OKTA_CONFIG]\n            }] }, { type: ɵngcc1.OktaAuth, decorators: [{\n                type: Inject,\n                args: [OKTA_AUTH]\n            }] }, { type: ɵngcc0.Injector, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaAuthGuard, [{\n        type: Injectable\n    }], function () { return [{ type: Object, decorators: [{\n                type: Inject,\n                args: [OKTA_CONFIG]\n            }] }, { type: ɵngcc1.OktaAuth, decorators: [{\n                type: Inject,\n                args: [OKTA_AUTH]\n            }] }, { type: ɵngcc0.Injector }]; }, null); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaAuthStateService, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc1.OktaAuth, decorators: [{\n                type: Inject,\n                args: [OKTA_AUTH]\n            }] }]; }, null); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaHasAnyGroupDirective, [{\n        type: Directive,\n        args: [{ selector: '[oktaHasAnyGroup]' }]\n    }], function () { return [{ type: ɵngcc0.TemplateRef }, { type: ɵngcc0.ViewContainerRef }, { type: OktaAuthStateService }]; }, { oktaHasAnyGroup: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(OktaAuthModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [\n                    OktaCallbackComponent,\n                    OktaHasAnyGroupDirective,\n                ],\n                exports: [\n                    OktaCallbackComponent,\n                    OktaHasAnyGroupDirective,\n                ],\n                providers: [\n                    OktaAuthGuard,\n                    OktaAuthStateService,\n                    {\n                        provide: OKTA_AUTH,\n                        useFactory: oktaAuthFactory,\n                        deps: [OKTA_CONFIG]\n                    },\n                ]\n            }]\n    }], function () { return [{ type: Object, decorators: [{\n                type: Inject,\n                args: [OKTA_CONFIG]\n            }] }, { type: ɵngcc2.Location, decorators: [{\n                type: Optional\n            }] }, { type: ɵngcc3.Router, decorators: [{\n                type: Optional\n            }] }]; }, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(OktaAuthModule, { declarations: [OktaCallbackComponent, OktaHasAnyGroupDirective], exports: [OktaCallbackComponent, OktaHasAnyGroupDirective] }); })();\n\nexport { OKTA_AUTH, OKTA_CONFIG, OktaAuthGuard, OktaAuthModule, OktaAuthStateService, OktaCallbackComponent, oktaAuthFactory as ɵa, OktaHasAnyGroupDirective as ɵb };\n\n"]},"metadata":{},"sourceType":"module"}